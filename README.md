# Book-to-CBZ-Converter

[![Python](https://img.shields.io/badge/Python-3.x-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Effortlessly convert your eBooks from **ePUB** or **PDF** formats into the comic book-friendly **CBZ** format, allowing you to enjoy your digital book collection on popular comic book reader apps like **Paperback** (iOS) across all your devices.

## Key Features

* **Effortless eBook to CBZ Conversion:** Easily transform your ePUB and PDF files into the comic book-friendly CBZ format.
* **Read Anywhere:** Enjoy your converted books on popular comic book reader apps like Paperback (iOS) across all your devices.
* **Optimized for eBooks:** Intelligently handles metadata from your eBooks to provide a better reading experience.
* **Flexible Output:** Create a single CBZ file or split it into chapter-based files for easier navigation.
* **Cross-Platform Compatibility:** Works seamlessly on Windows, Linux, and macOS.
* **Simple Setup:** Includes helpful scripts to guide you through the installation of necessary tools.
* **Customizable:** Offers a configuration tool to easily adjust settings to your preferences.

## Getting Started

### Prerequisites

* **Python:** You need Python installed on your system (unless you are on Windows and choose to use the provided CMD file). You can download Python from [python.org](https://www.python.org/downloads/).
* **Calibre** For ePUB processing, you need Calibre installed on your system. You can download it from [calibre-ebook.com](https://calibre-ebook.com/). 

### Installation

The `get_deps` folder contains scripts to help you install the required Python dependencies. Choose the method that suits your operating system:

#### Windows

1.  Navigate to the `get_deps` folder in your terminal or file explorer.
2.  Run the `install_dependencies.cmd` script. This script will attempt to automatically install the necessary Python packages and programs (example:Calibre).

#### macOS and Linux (and Windows)

1.  Ensure you have Python installed on your system.
2.  Navigate to the `get_deps` folder in your terminal.
3.  Run the `install_dependencies.py` script using the command:
    ```bash
    python install_dependencies.py
    ```
    This script will guide you through the installation process, calling upon `install_dependencies_p1.py` and `install_dependencies_p2.py` to install specific sets of dependencies.

    * `install_dependencies_p1.py`: Installs dependencies required by the book processing script (`p1_process_books.py`).
    * `install_dependencies_p2.py`: Installs dependencies required by the CBZ creation script (`p2_create_cbz.py`).

    You can run these scripts again if needed to verify or reinstall specific dependencies.

## Usage

The converter offers flexible ways to process your books, leveraging different techniques for optimal results:

### 1. Using the Unified Script (`convert_books.py`)

This is the recommended way for most users to perform a complete conversion:

1.  **Configuration:** Before running, you can customize the conversion process using the interactive `configurator.py` script (see **Configuration**) or by directly editing settings in `p1_process_books.py` and `p2_create_cbz.py`. This includes options for picking the directory for conversion, whether to split the CBZ into multiple files based on chapters, and other settings.
2.  **Execution:**
    ```bash
    python convert_books.py
    ```
    **Windows users** can also use the `win_run.cmd` file, which internally executes `convert_books.py`:
    ```cmd
    win_run.cmd
    ```
    This makes it easy to schedule conversions using the Windows Task Scheduler.

### 2. Understanding the Conversion Process (Individual Scripts)

For users who want more control or to understand the underlying mechanics, the conversion is broken down into two main stages:

#### a. Book Processing (`p1_process_books.py`)

This script takes your eBook file (ePUB or PDF) as input and prepares it for CBZ creation.

* **ePUB Handling:** When processing ePUB files, this script utilizes **Calibre** for robust format handling. It prioritizes metadata from the **OPF** file over the PDF since it contains more metadata. Then converts the ePUB file to PDF for p2.
* **PDF Handling:** For PDF files, the script extracts available metadata if none was created from the OPF file. It can also utilize the **Table of Contents (TOC)** embedded in the PDF to identify chapter boundaries for potential splitting (this can be toggled in the configuration).
* **Intermediate Data:** The script processes the book information and stores it in **two JSON files**. These files act as a bridge, holding the necessary data for the next stage.

#### b. CBZ Creation (`p2_create_cbz.py`)

This script takes the **two JSON files** generated by `p1_process_books.py` will help in the creation of CBZ file(s) but are optional in actual file creation.

* **Single or Multiple CBZ:** Based on the configuration settings, this script can create a single CBZ file containing the entire book or split it into multiple CBZ files, with each file representing a chapter.

You can run these individual scripts directly if needed, but the `convert_books.py` or `win_run.cmd` script automates this entire flow.

### 3. Configuration (`configurator.py`)

This script provides a user-friendly, interactive way to modify key settings found in `p1_process_books.py` and `p2_create_cbz.py` without needing to directly edit the code. You can set the output directory and adjust other processing parameters.

1.  **Execution:**
    ```bash
    python configurator.py
    ```
    **Windows users** can also just double click `configurator.py`

2.  Follow the prompts to review and modify the settings.

**Important:** Before running any conversion, ensure you have configured your preferences using `configurator.py` or by manually editing the individual script files. Place the scripts in the same directory as your eBooks or update the settings to point to their location.

## Examples

Let's say you have an ePUB file named `my_book.epub` in the same directory as the scripts.

1.  **Using the unified script:** After configuring the output directory and options (either via `configurator.py` or manual editing), running `python convert_books.py` will process `my_book.epub` converting to `my_book.pdf`, generate the intermediate JSON files, and then combines everything it knows to create the CBZ file(s) (e.g., `my_book.cbz` or `my_book_chapter_1.cbz`, `my_book_chapter_2.cbz`, etc.) in the specified directory.

2.  **Running individual scripts:**
    * `python p1_process_books.py my_book.epub` (This will process `my_book.epub` and convert it and create the two JSON files containing book information and chapter data).
    * `python p2_create_cbz.py` (This will then read the JSON files and create the CBZ file(s) based on the settings).

## Contributing

If you'd like to contribute to this project, please feel free to open issues or submit pull requests.

## License

This project is licensed under the [MIT License](LICENSE) .
